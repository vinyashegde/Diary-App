(this["webpackJsonpdiaries-app"]=this["webpackJsonpdiaries-app"]||[]).push([[0],{342:function(e,t,n){},516:function(e,t,n){},706:function(e,t,n){"use strict";n.r(t);var i=n(6),a=n(1),c=n(2),r=n.n(c),s=n(129),o=n.n(s),l=(n(342),n(7)),d=n(12),u=n(65),j=n(66),h=n(69),b=n(68),f=n(17),O=n(10),p=n.n(O),m=n(5),x=n(51),y=n.n(x),g=n(131),v=function(e,t,n){e.collection("notifications").add(t).then((function(){n({type:"CREATE_NOTIFICATION",notification:t})})).catch((function(e){n({type:"CREATE_NOTIFICATION_ERROR",err:e})}))},N=function(e){return function(t,n,i){var a=(0,i.getFirebase)().firestore(),c=e.diaryId,r=e.title,s=e.type;a.collection("diaries").doc(c).update({title:r,type:s}).then((function(){t({type:"UPDATE_DIARY",diary:e})})).catch((function(e){t({type:"UPDATE_DIARY_ERROR",err:e})}))}},E=n(40),w=n.n(E),C=Object(m.b)((function(e){return{userProfile:e.firebase.profile}}),(function(e){return{updateDiary:function(t){return e(N(t))},deleteDiary:function(t){return e(function(e){return function(t,n,i){var a=(0,i.getFirebase)().firestore(),c=function(){var t=Object(g.a)(y.a.mark((function t(){return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all(e.entryIds.map(function(){var e=Object(g.a)(y.a.mark((function e(t){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.collection("entries").doc(t).delete();case 2:e.sent;case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),r=function(){var n=Object(g.a)(y.a.mark((function n(){return y.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,c();case 2:n.sent,a.collection("diaries").doc(e.id).delete().then((function(){t({type:"DELETE_DIARY"}),p.a.fire("Deleted!","Diary has been deleted.","success")})).catch((function(e){t({type:"DELETE_DIARY_ERROR",err:e})}));case 4:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();p.a.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then((function(e){e.isConfirmed&&r()}))}}(t))}}}))((function(e){var t=e.diary,n=(e.updateDiary,e.deleteDiary),i=e.userProfile,r=e.canEdit,s=t.title,o=t.type,d=t.entryIds.length,u=Object(c.useState)("".concat(t.authorFirstName," ").concat(t.authorLastName)),j=Object(f.a)(u,2),h=j[0],b=j[1];h==="".concat(i.firstName," ").concat(i.lastName)&&b("You");var O=r?Object(a.jsx)(l.b,{to:"/diary/"+t.id+"/create",className:"btn btn-small waves-effect  waves-light entries-btn",title:"Add entry",style:{width:"9%",backgroundColor:"#4aa69b"},children:Object(a.jsx)("i",{className:"material-icons right",children:"add"})}):null,p=r?Object(a.jsx)(l.b,{to:"/diary/"+t.id+"/edit",title:"edit",style:{color:"#4aa69b",margin:"0 0.5rem"},className:"secondary-content",children:Object(a.jsx)("i",{style:{color:"#424242"},className:"material-icons edit-icon",children:"create"})}):null,m=r?Object(a.jsx)("a",{onClick:function(){n(t)},title:"delete",style:{color:"#4aa69b"},className:"secondary-content",children:Object(a.jsx)("i",{style:{color:"#424242"},className:"material-icons edit-icon",children:"delete"})}):null;return Object(a.jsx)("div",{className:"card hoverable z-depth-2 diary-summary",children:Object(a.jsxs)("div",{className:"card-content grey-text text-darken-3",children:[Object(a.jsxs)("div",{className:"card-title",children:[s,Object(a.jsx)("a",{title:"private"===o?"private":"public",className:"secondary-content",children:Object(a.jsx)("i",{style:{color:"#424242",cursor:"default"},className:"material-icons",children:"private"===o?"lock":"lock_open"})}),p,m]}),Object(a.jsx)("span",{className:"new badge","data-badge-caption":d>1?"saved entries":"saved entry",children:d}),Object(a.jsxs)("p",{children:["Posted by ",Object(a.jsx)("span",{className:"pink-text",children:h})]}),Object(a.jsx)("p",{className:"grey-text",children:w()(t.createdAt.toDate()).calendar()}),Object(a.jsx)("div",{className:"right-align",children:d>0?Object(a.jsx)(l.b,{to:"/diary/"+t.id,className:"btn btn-small waves-effect  waves-light entries-btn",title:"View entries",style:{width:"50px",backgroundColor:"#4aa69b"},children:Object(a.jsx)("i",{className:"material-icons",children:"send"})}):O})]})})})),R=Object(m.b)((function(e){return{data:e.data}}),(function(e){return{setShowOtherDiaries:function(t){return e(function(e){return function(t,n){t({type:"UDPATE_SHOW_DIARIES",value:e})}}(t))}}}))((function(e){var t,n=e.diaries,i=e.authorId,c=e.data,r=e.setShowOtherDiaries;return console.log("showOtherDiaries",c.showOtherDiaries),t=c.showOtherDiaries?Object(a.jsx)("input",{id:"switch",type:"checkbox",onChange:function(e){r(!c.showOtherDiaries)}}):Object(a.jsx)("input",{id:"switch",type:"checkbox",onChange:function(e){r(!c.showOtherDiaries)},defaultChecked:!0}),Object(a.jsxs)("div",{className:"project-list section",children:[Object(a.jsxs)("h4",{className:"card-title",style:{color:"#424242",textShadow:"2px 2px 2px #776a6a"},children:["Diaries",Object(a.jsx)("span",{class:"switch secondary-content",children:Object(a.jsxs)("label",{htmlFor:"switch",children:[Object(a.jsx)("span",{style:{fontSize:"1.3rem",color:"brown",textShadow:"1px 1px 1px gray"},children:"My Diaries Only"}),t,Object(a.jsx)("span",{class:"lever"})]})})]}),Object(a.jsx)("div",{className:"divider"}),n&&n.map((function(e){if("private"===e.type){if(e.authorId===i)return Object(a.jsx)(C,{diary:e,authorId:i,canEdit:!0},e.id)}else if("public"===e.type){if(e.authorId===i)return Object(a.jsx)(C,{diary:e,canEdit:!0},e.id);if(c.showOtherDiaries)return Object(a.jsx)(C,{diary:e,canEdit:!1},e.id)}})),Object(a.jsx)("div",{className:"fixed-action-btn",children:Object(a.jsx)(l.b,{title:"create new diary",className:"btn-floating btn-large  waves-effect hoverable waves-light green",to:"/create",children:Object(a.jsx)("i",{className:"material-icons",children:"add"})})})]})})),I=n(16),D=n(20),S=n(67),A=Object(m.b)((function(e){return{userProfile:e.firebase.profile}}))((function(e){var t=e.notifications,n=e.userProfile;return Object(a.jsxs)("div",{className:"section",children:[Object(a.jsx)("h4",{className:"card-title",style:{color:"#424242",textShadow:"2px 2px 2px #776a6a"},children:"Notifications"}),Object(a.jsx)("div",{className:"divider"}),Object(a.jsx)("div",{className:"card z-depth-0",children:Object(a.jsx)("div",{className:"card-content",children:Object(a.jsx)("ul",{className:"notifications",children:t&&t.map((function(e){var t=e.id,i=e.user,c=e.content,r=e.time;return i==="".concat(n.firstName," ").concat(n.lastName)&&(i="You"),Object(a.jsxs)("li",{children:[Object(a.jsxs)("span",{className:"pink-text",children:[i," "]}),Object(a.jsx)("span",{children:c}),Object(a.jsx)("div",{className:"grey-text note-date",children:w()(r.toDate()).fromNow()})]},t)}))})})})]})})),T=(n(516),function(e){Object(h.a)(n,e);var t=Object(b.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(j.a)(n,[{key:"render",value:function(){var e=this.props,t=e.diaries,n=e.auth,i=e.notifications,c=e.data;return console.log("data",c),n.uid?t?Object(a.jsx)("div",{style:{padding:"0 4rem",justifyContent:"center",alignItems:"center",minWidth:"500px",minHeight:"100vh"},className:"dashboard container",children:Object(a.jsxs)("div",{className:"row",children:[Object(a.jsx)("div",{className:"col s12 l6 ",children:Object(a.jsx)(R,{diaries:t,authorId:n.uid})}),Object(a.jsx)("div",{className:"col s12 l4 offset-l1",children:Object(a.jsx)(A,{notifications:i})})]})}):Object(a.jsx)("div",{style:{width:"100%",height:"100%",minHeight:"90vh",display:"flex",justifyContent:"center",alignItems:"center"},children:Object(a.jsx)(S.BeatLoader,{loading:!0})}):Object(a.jsx)(d.a,{to:"/signin"})}}]),n}(c.Component)),_=Object(D.c)(Object(m.b)((function(e){return{notifications:e.firestore.ordered.notifications,diaries:e.firestore.ordered.diaries,entries:e.firestore.ordered.entries,auth:e.firebase.auth,data:e.data}})),Object(I.firestoreConnect)([{collection:"diaries",orderBy:["createdAt","desc"]},{collection:"notifications",limit:3,orderBy:["time","desc"]}]))(T),k=Object(m.b)(null,(function(e){return{signOut:function(){return e((function(e,t,n){(0,n.getFirebase)().auth().signOut().then((function(){p.a.fire({icon:"success",title:"Signed Out !",showConfirmButton:!1,timer:1e3}).then((function(){})),e({type:"SIGNOUT_SUCCESS"})}))}))}}}))((function(e){return Object(a.jsxs)("ul",{className:"right",children:[Object(a.jsx)("li",{children:Object(a.jsx)("a",{onClick:function(){return e.signOut()},children:"Log Out"})}),Object(a.jsx)("li",{children:Object(a.jsx)(l.c,{to:"/",className:"btn btn-floating pink lighten-1",children:e.profile.initials})})]})})),F=function(e){return Object(a.jsxs)("ul",{className:"right",children:[Object(a.jsx)("li",{children:Object(a.jsx)(l.c,{to:"/signup",children:"Signup"})}),Object(a.jsx)("li",{children:Object(a.jsx)(l.c,{to:"/signin",children:"Login"})})]})},P=Object(m.b)((function(e){return{auth:e.firebase.auth,profile:e.firebase.profile}}))((function(e){var t=e.auth,n=e.profile,i=t.uid?Object(a.jsx)(k,{profile:n}):Object(a.jsx)(F,{});return Object(a.jsx)("nav",{className:"nav-wrapper grey darken-3",children:Object(a.jsxs)("div",{className:"container",children:[Object(a.jsx)(l.b,{to:"/",className:"brand-logo left",style:{marginLeft:"1rem"},children:"Diaries App"}),i]})})})),U=function(e){return function(t,n,i){var a=(0,i.getFirebase)().firestore(),c=e.entryId,r=e.title,s=e.content;a.collection("entries").doc(c).update({title:r,content:s}).then((function(){t({type:"UPDATE_ENTRY",entry:e})})).catch((function(e){t({type:"UPDATE_ENTRY_ERROR",err:e})}))}},Y=Object(m.b)(null,(function(e){return{updateEntry:function(t){return e(U(t))},deleteEntry:function(t){return e(function(e){return function(t,n,i){var a=(0,i.getFirebase)().firestore(),c=e.diaryId,r=e.id;a.collection("diaries").doc(c).get().then((function(n){var i=n.data().entryIds.filter((function(e){return e!==r}));a.collection("diaries").doc(c).update({entryIds:i}).then((function(){a.collection("entries").doc(e.id).delete().then((function(){t({type:"DELETE_ENTRY",entry:e}),p.a.fire("Deleted!","Entry has been deleted.","success").then((function(){}))})).catch((function(e){t({type:"DELETE_ENTRY_ERROR",err:e})}))}))}))}}(t))}}}))((function(e){var t=e.entry.title,n=e.entry.content,i=e.entry.createdAt,c=Object(d.g)(),r=e.isAuthenticated?Object(a.jsx)("a",{onClick:function(){c.push("/diary/".concat(e.diaryId,"/").concat(e.entry.id,"/edit"))},title:"edit",className:"secondary-content",children:Object(a.jsx)("i",{style:{color:"#424242"},className:"material-icons edit-icon",children:"create"})}):null,s=e.isAuthenticated?Object(a.jsx)("a",{onClick:function(){e.deleteEntry(e.entry)},title:"delete",style:{margin:"0 1rem"},className:"secondary-content",children:Object(a.jsx)("i",{style:{color:"#424242"},className:"material-icons edit-icon",children:"delete"})}):null;return Object(a.jsx)("div",{className:"card hoverable z-depth-2 entry-summary",children:Object(a.jsxs)("div",{className:"card-content grey-text text-darken-3",children:[Object(a.jsxs)("div",{className:"card-title",children:[t,s,r,Object(a.jsx)("a",{onClick:function(){c.push("/diary/".concat(e.diaryId,"/").concat(e.entry.id))},style:{margin:"0 1rem"},title:"view",className:"secondary-content",children:Object(a.jsx)("i",{style:{color:"#424242"},className:"material-icons edit-icon",children:"visibility"})})]}),Object(a.jsx)("p",{className:"truncate",children:n}),Object(a.jsx)("p",{className:"grey-text",children:w()(i.toDate()).calendar()})]})})})),B=function(e){var t=e.id,n=e.entries,i=e.diaryName,r=e.showButton,s=Object(c.useState)(!0),o=Object(f.a)(s,2),u=o[0],j=o[1],h=r?Object(a.jsx)(l.b,{title:"create new entry",className:"btn-floating btn-large  waves-effect hoverable waves-light green",to:"/diary/".concat(t,"/create"),children:Object(a.jsx)("i",{className:"material-icons",children:"add"})}):null;return Object(c.useEffect)((function(){n.length?j(!1):j(!0)}),[n]),u?Object(a.jsx)("div",{style:{width:"100%",height:"100%",minHeight:"90vh",display:"flex",justifyContent:"center",alignItems:"center"},children:Object(a.jsx)(S.BeatLoader,{loading:!0})}):n.length<1?Object(a.jsx)(d.a,{to:"/"}):Object(a.jsxs)("div",{className:"project-list section",children:[Object(a.jsx)("h4",{className:"card-title",style:{color:"#424242"},children:i}),Object(a.jsx)("div",{className:"divider"}),n&&n.map((function(e){return Object(a.jsx)(Y,{diaryId:t,isAuthenticated:r,entry:e},e.id)})),Object(a.jsx)("div",{className:"fixed-action-btn",children:h})]})},L=Object(D.c)(Object(m.b)((function(e){return{entries:e.firestore.ordered.entries,auth:e.firebase.auth}})),Object(I.firestoreConnect)([{collection:"entries"}]))((function(e){var t=e.match.params.id,n=e.entries,i=e.auth,r=i.uid,s=[],o=Object(c.useState)(""),l=Object(f.a)(o,2),u=l[0],j=l[1],h=Object(c.useState)(!1),b=Object(f.a)(h,2),O=b[0],p=b[1],m=Object(I.getFirebase)().firestore(),x=function(e){return e.diaryId===t};return Object(c.useEffect)((function(){m.collection("diaries").doc(t).get().then((function(e){j(e.data().title),e.data().authorId===r&&p(!0)})).catch((function(e){})),n&&n.find(x)}),[n]),n&&n.map((function(e){t===e.diaryId&&s.push(e)})),i.uid?Object(a.jsx)("div",{className:"dashboard container",children:Object(a.jsx)("div",{className:"row",children:Object(a.jsx)("div",{className:"col s12 l10",children:s&&Object(a.jsx)(B,{id:t,entries:s,diaryName:u,showButton:O})})})}):Object(a.jsx)(d.a,{to:"/signin"})}));var q=Object(D.c)(Object(m.b)((function(e){return{entries:e.firestore.ordered.entries}})),Object(I.firestoreConnect)([{collection:"entries"}]))((function(e){var t,n=Object(c.useState)(!0),i=Object(f.a)(n,2),r=i[0],s=i[1],o=e.entries,l="",d="",u=e.match.url.split("/"),j=(u[2],u[3]);return o&&o.map((function(e){e.id===j&&(l=e.title,d=e.content,t=e.createdAt)})),Object(c.useEffect)((function(){s(!o)}),[o]),r?Object(a.jsx)("div",{style:{width:"100%",height:"100%",minHeight:"90vh",display:"flex",justifyContent:"center",alignItems:"center"},children:Object(a.jsx)(S.BeatLoader,{loading:!0})}):Object(a.jsx)("div",{className:"container section entry-details",children:Object(a.jsxs)("div",{className:"card z-depth-0",children:[Object(a.jsxs)("div",{className:"card-content",children:[Object(a.jsx)("span",{className:"card-title",children:l}),Object(a.jsx)("pre",{style:{width:"100%",overflow:"auto"},children:d})]}),Object(a.jsx)("div",{className:"card-action grey lighten-4 grey-text",children:Object(a.jsx)("div",{children:w()(t.toDate()).calendar()})})]})})})),z=n(25),W=function(e){Object(h.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(u.a)(this,n);for(var i=arguments.length,a=new Array(i),c=0;c<i;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).state={email:"",password:""},e.handleChange=function(t){e.setState(Object(z.a)({},t.target.id,t.target.value))},e.handleSubmit=function(t){t.preventDefault(),e.props.signIn(e.state)},e}return Object(j.a)(n,[{key:"render",value:function(){return this.props.auth.uid?Object(a.jsx)(d.a,{to:"/"}):Object(a.jsx)("div",{className:"container",children:Object(a.jsxs)("form",{onSubmit:this.handleSubmit,className:"white",children:[Object(a.jsx)("h5",{className:"grey-text text-darken-3",children:"Sign In"}),Object(a.jsxs)("div",{className:"input-field",children:[Object(a.jsx)("label",{htmlFor:"email",children:"Email"}),Object(a.jsx)("input",{type:"email",required:!0,id:"email",onChange:this.handleChange})]}),Object(a.jsxs)("div",{className:"input-field",children:[Object(a.jsx)("label",{htmlFor:"password",children:"Password"}),Object(a.jsx)("input",{type:"password",required:!0,id:"password",onChange:this.handleChange})]}),Object(a.jsx)("div",{className:"input-field",children:Object(a.jsx)("button",{className:"btn pink lighten-1 z-depth-0",children:"Login"})})]})})}}]),n}(c.Component),G=Object(m.b)((function(e){return{auth:e.firebase.auth}}),(function(e){return{signIn:function(t){return e((n=t,function(e,t,i){(0,i.getFirebase)().auth().signInWithEmailAndPassword(n.email,n.password).then((function(){e({type:"LOGIN_SUCCESS"}),p.a.fire({icon:"success",title:"Login Success!",showConfirmButton:!1,timer:1500}).then((function(){}))})).catch((function(t){"auth/wrong-password"===t.code?p.a.fire({icon:"error",title:"Password is incorrect !",showConfirmButton:!1,timer:1500}).then((function(){window.location.reload(!1)})):"auth/user-not-found"===t.code?p.a.fire({icon:"error",title:"User not found !",showConfirmButton:!1,timer:1500}).then((function(){window.location.reload(!1)})):"auth/too-many-requests"===t.code&&p.a.fire({icon:"error",title:"Too many failed login attempts, please try again later !",showConfirmButton:!1,timer:1500}).then((function(){window.location.reload(!1)})),e({type:"LOGIN_ERROR",err:t})}))}));var n}}}))(W),H=function(e){Object(h.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(u.a)(this,n);for(var i=arguments.length,a=new Array(i),c=0;c<i;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).state={email:"",password:"",firstName:"",lastName:""},e.handleChange=function(t){e.setState(Object(z.a)({},t.target.id,t.target.value))},e.handleSubmit=function(t){t.preventDefault(),e.props.signUp(e.state)},e}return Object(j.a)(n,[{key:"render",value:function(){return this.props.auth.uid?Object(a.jsx)(d.a,{to:"/"}):Object(a.jsx)("div",{className:"container",children:Object(a.jsxs)("form",{onSubmit:this.handleSubmit,className:"white",children:[Object(a.jsx)("h5",{className:"grey-text text-darken-3",children:"Sign Up"}),Object(a.jsxs)("div",{className:"input-field",children:[Object(a.jsx)("label",{htmlFor:"email",children:"Email"}),Object(a.jsx)("input",{type:"email",required:!0,id:"email",onChange:this.handleChange})]}),Object(a.jsxs)("div",{className:"input-field",children:[Object(a.jsx)("label",{htmlFor:"password",children:"Password"}),Object(a.jsx)("input",{type:"password",required:!0,id:"password",onChange:this.handleChange})]}),Object(a.jsxs)("div",{className:"input-field",children:[Object(a.jsx)("label",{htmlFor:"firstName",children:"First Name"}),Object(a.jsx)("input",{type:"text",required:!0,id:"firstName",onChange:this.handleChange})]}),Object(a.jsxs)("div",{className:"input-field",children:[Object(a.jsx)("label",{htmlFor:"lastName",children:"Last Name"}),Object(a.jsx)("input",{type:"text",required:!0,id:"lastName",onChange:this.handleChange})]}),Object(a.jsx)("div",{className:"input-field",children:Object(a.jsx)("button",{className:"btn pink lighten-1 z-depth-0",children:"Sign Up"})})]})})}}]),n}(c.Component),J=Object(m.b)((function(e){return{auth:e.firebase.auth}}),(function(e){return{signUp:function(t){return e(function(e){return function(t,n,i){var a=(0,i.getFirebase)(),c=a.firestore();a.auth().createUserWithEmailAndPassword(e.email,e.password).then((function(t){return c.collection("users").doc(t.user.uid).set({firstName:e.firstName,lastName:e.lastName,initials:e.firstName[0]+e.lastName[0]})})).then((function(){t({type:"SIGNUP_SUCCESS"}),p.a.fire({icon:"success",title:"Signup Success!",showConfirmButton:!1,timer:1500}).then((function(){}));var n={content:"Joined the party",user:"".concat(e.firstName," ").concat(e.lastName),time:new Date};v(c,n,t)})).catch((function(e){"auth/weak-password"===e.code?p.a.fire({icon:"error",title:"Weak Password !",text:"Password should be at least 6 characters",showConfirmButton:!1,timer:1500}).then((function(){})):"auth/email-already-in-use"===e.code&&p.a.fire({icon:"error",title:"Account Already Exists !",text:"Email address is already in use by another account",showConfirmButton:!1,timer:2500}).then((function(){})),t({type:"SIGNUP_ERROR",err:e})}))}}(t))}}}))(H),M=Object(m.b)((function(e){return{auth:e.firebase.auth}}),(function(e){return{createDiary:function(t){return e(function(e){return function(t,n,a){var c=(0,a.getFirebase)().firestore(),r=n().firebase.profile,s=n().firebase.auth.uid;c.collection("diaries").add(Object(i.a)(Object(i.a)({},e),{},{authorFirstName:r.firstName,authorLastName:r.lastName,authorId:s,createdAt:new Date})).then((function(){if(t({type:"CREATE_DIARY",diary:e}),"public"===e.type){var n={content:"Added a new project",user:"".concat(r.firstName," ").concat(r.lastName),time:new Date};v(c,n,t)}})).catch((function(e){t({type:"CREATE_DIARY_ERROR",err:e})}))}}(t))}}}))((function(e){var t=Object(d.g)(),n=Object(c.useState)({title:"",type:"public",entryIds:[]}),r=Object(f.a)(n,2),s=r[0],o=r[1];if(!e.auth.uid)return Object(a.jsx)(d.a,{to:"/signin"});var l=function(e){o(Object(i.a)(Object(i.a)({},s),{},Object(z.a)({},e.target.id,e.target.value)))};return Object(a.jsx)("div",{className:"container",children:Object(a.jsxs)("form",{onSubmit:function(n){n.preventDefault(),e.createDiary(s),p.a.fire({icon:"success",title:"Diary Created!",showConfirmButton:!1,timer:1500}).then((function(){t.push("/")}))},className:"white",children:[Object(a.jsx)("h5",{className:"grey-text text-darken-3",children:"Create new diary"}),Object(a.jsxs)("div",{className:"input-field",children:[Object(a.jsx)("label",{htmlFor:"title",children:"Title"}),Object(a.jsx)("input",{required:!0,type:"text",id:"title",onChange:l})]}),"Type:",Object(a.jsx)("p",{children:Object(a.jsxs)("label",{children:[Object(a.jsx)("input",{className:"with-gap",name:"type",type:"radio",id:"type",required:!0,defaultChecked:!0,value:"public",onChange:l}),Object(a.jsx)("span",{children:"Public"})]})}),Object(a.jsx)("p",{children:Object(a.jsxs)("label",{children:[Object(a.jsx)("input",{className:"with-gap",name:"type",id:"type",required:!0,type:"radio",value:"private",onChange:l}),Object(a.jsx)("span",{children:"Private"})]})}),Object(a.jsx)("div",{className:"input-field",children:Object(a.jsx)("button",{className:"btn pink lighten-1 z-depth-0",children:"Create"})})]})})})),V=Object(m.b)(null,(function(e){return{createEntry:function(t){return e(function(e){return function(t,n,a){var c=(0,a.getFirebase)().firestore();c.collection("entries").add(Object(i.a)(Object(i.a)({},e),{},{createdAt:new Date})).then((function(n){var i=n.id,a=e.diaryId;c.collection("diaries").doc(e.diaryId).get().then((function(e){var t=e.data().entryIds;t.push(i),c.collection("diaries").doc(a).update({entryIds:t})})),t({type:"CREATE_ENTRY",entry:e})})).catch((function(e){t({type:"CREATE_ENTRY_ERROR",err:e})}))}}(t))}}}))((function(e){var t=Object(d.g)(),n=e.match.params.id,r=Object(c.useState)({title:"",content:"",diaryId:n}),s=Object(f.a)(r,2),o=s[0],l=s[1],u=function(e){l(Object(i.a)(Object(i.a)({},o),{},Object(z.a)({},e.target.id,e.target.value)))};return Object(a.jsx)("div",{className:"container",children:Object(a.jsxs)("form",{onSubmit:function(i){i.preventDefault(),e.createEntry(o),p.a.fire({icon:"success",title:"Entry Created!",showConfirmButton:!1,timer:1500}).then((function(){t.push("/diary/".concat(n))}))},className:"white",children:[Object(a.jsx)("h5",{className:"grey-text text-darken-3",children:"Create new entry"}),Object(a.jsxs)("div",{className:"input-field",children:[Object(a.jsx)("label",{htmlFor:"title",children:"Title"}),Object(a.jsx)("input",{required:!0,type:"text",id:"title",onChange:u})]}),Object(a.jsxs)("div",{className:"input-field",children:[Object(a.jsx)("label",{htmlFor:"content",children:"Entry Content"}),Object(a.jsx)("textarea",{id:"content",onChange:u,className:"materialize-textarea"})]}),Object(a.jsx)("div",{className:"input-field",children:Object(a.jsx)("button",{className:"btn pink lighten-1 z-depth-0",children:"Create"})})]})})})),K=Object(D.c)(Object(m.b)((function(e){return{entries:e.firestore.ordered.entries}}),(function(e){return{updateEntry:function(t){return e(U(t))}}})),Object(I.firestoreConnect)([{collection:"entries"}]))((function(e){var t=Object(d.g)(),n=e.match.url.split("/"),r=n[2],s=n[3],o="",l="";e.entries&&e.entries.map((function(e){e.diaryId===r&&s===e.id&&(o=e.title,l=e.content)}));var u=Object(c.useState)({entryId:s,title:o,content:l}),j=Object(f.a)(u,2),h=j[0],b=j[1],O=function(e){b(Object(i.a)(Object(i.a)({},h),{},Object(z.a)({},e.target.id,e.target.value)))};return Object(a.jsx)("div",{className:"container",children:Object(a.jsxs)("form",{onSubmit:function(n){n.preventDefault(),e.updateEntry(h),p.a.fire({icon:"success",title:"Entry updated!",showConfirmButton:!1,timer:1500}).then((function(){t.push("/diary/".concat(r))}))},className:"white",children:[Object(a.jsx)("h5",{className:"grey-text text-darken-3",children:"Edit entry"}),Object(a.jsxs)("div",{className:"input-field",children:[Object(a.jsx)("label",{htmlFor:"title"}),Object(a.jsx)("input",{required:!0,defaultValue:o,type:"text",id:"title",onChange:O})]}),Object(a.jsxs)("div",{className:"input-field",children:[Object(a.jsx)("label",{htmlFor:"content"}),Object(a.jsx)("textarea",{id:"content",onChange:O,defaultValue:l,className:"materialize-textarea"})]}),Object(a.jsx)("div",{className:"input-field",children:Object(a.jsx)("button",{className:"btn pink lighten-1 z-depth-0",children:"Confirm"})})]})})})),Q=Object(D.c)(Object(m.b)((function(e){return{diaries:e.firestore.ordered.diaries}}),(function(e){return{updateDiary:function(t){return e(N(t))}}})),Object(I.firestoreConnect)([{collection:"dairies"}]))((function(e){var t=Object(d.g)(),n=e.match.url.split("/")[2],r="",s="";e.diaries.map((function(e){e.id===n&&(r=e.title,s=e.type)}));var o=Object(c.useState)({diaryId:n,title:r,type:s,entryIds:[]}),l=Object(f.a)(o,2),u=l[0],j=l[1],h=function(e){j(Object(i.a)(Object(i.a)({},u),{},Object(z.a)({},e.target.id,e.target.value)))};return Object(a.jsx)("div",{className:"container",children:Object(a.jsxs)("form",{onSubmit:function(n){n.preventDefault(),e.updateDiary(u),p.a.fire({icon:"success",title:"Diary Updated!",showConfirmButton:!1,timer:1500}).then((function(){t.push("/")}))},className:"white",children:[Object(a.jsx)("h5",{className:"grey-text text-darken-3",children:"Edit Diary"}),Object(a.jsxs)("div",{className:"input-field",children:[Object(a.jsx)("label",{htmlFor:"title"}),Object(a.jsx)("input",{required:!0,defaultValue:r,type:"text",id:"title",onChange:h})]}),"Type:","public"===s?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("p",{children:Object(a.jsxs)("label",{children:[Object(a.jsx)("input",{className:"with-gap",name:"type",type:"radio",id:"type",required:!0,defaultChecked:!0,value:"public",onChange:h}),Object(a.jsx)("span",{children:"Public"})]})}),Object(a.jsx)("p",{children:Object(a.jsxs)("label",{children:[Object(a.jsx)("input",{className:"with-gap",name:"type",id:"type",required:!0,type:"radio",value:"private",onChange:h}),Object(a.jsx)("span",{children:"Private"})]})})]}):Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("p",{children:Object(a.jsxs)("label",{children:[Object(a.jsx)("input",{className:"with-gap",name:"type",type:"radio",id:"type",required:!0,value:"public",onChange:h}),Object(a.jsx)("span",{children:"Public"})]})}),Object(a.jsx)("p",{children:Object(a.jsxs)("label",{children:[Object(a.jsx)("input",{className:"with-gap",name:"type",id:"type",required:!0,type:"radio",value:"private",defaultChecked:!0,onChange:h}),Object(a.jsx)("span",{children:"Private"})]})})]}),Object(a.jsx)("div",{className:"input-field",children:Object(a.jsx)("button",{className:"btn pink lighten-1 z-depth-0",children:"Confirm"})})]})})}));var X=function(){return Object(a.jsxs)(l.a,{children:[Object(a.jsx)(P,{}),Object(a.jsxs)(d.d,{children:[Object(a.jsx)(d.b,{exact:!0,path:"/",component:_}),Object(a.jsx)(d.b,{exact:!0,path:"/diary/:id",component:L}),Object(a.jsx)(d.b,{path:"/signin",component:G}),Object(a.jsx)(d.b,{path:"/signup",component:J}),Object(a.jsx)(d.b,{path:"/create",component:M}),Object(a.jsx)(d.b,{path:"/diary/:id/create",component:V}),Object(a.jsx)(d.b,{path:"/diary/:id/edit",component:Q}),Object(a.jsx)(d.b,{path:"/diary/:id/:id/edit",component:K}),Object(a.jsx)(d.b,{path:"/diary/:id/:id",component:q})]}),Object(a.jsx)("div",{style:{height:"150px"}})]})},Z=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,709)).then((function(t){var n=t.getCLS,i=t.getFID,a=t.getFCP,c=t.getLCP,r=t.getTTFB;n(e),i(e),a(e),c(e),r(e)}))},$={authError:null},ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN_ERROR":return e;case"LOGIN_SUCCESS":return Object(i.a)(Object(i.a)({},e),{},{authError:null});case"SIGNOUT_SUCCESS":return e;case"SIGNUP_SUCCESS":return Object(i.a)(Object(i.a)({},e),{},{authError:null});case"SIGNUP_ERROR":return Object(i.a)(Object(i.a)({},e),{},{authError:t.err.message});default:return e}},te={},ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:te,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CREATE_ENTRY":case"CREATE_ENTRY_ERROR":case"UPDATE_ENTRY":case"UPDATE_ENTRY_ERROR":case"DELETE_ENTRY":case"DELETE_ENTRY_ERROR":default:return e}},ie={diaries:[{id:"1",title:"Journey to Karachi",type:"private",entries:[{id:"1",title:"Seaview",content:"We enjoyed alot, on horses and cars and water"},{id:"2",title:"Dolmen Mall",content:"We did shopping and eating"}]},{id:"2",title:"Journey to Hyderabad",type:"public",entries:[{id:"1",title:"Resham gali",content:"We enjoyed alot, purchasing clothes"}]},{id:"3",title:"Journey to Quetta",type:"private",entries:[{id:"1",title:"Mountains",content:"We enjoyed alot, on mountains"},{id:"2",title:"Pathan shop",content:"We did seating"},{id:"3",title:"Snowfalls",content:"We enjoyed alot"}]}]},ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ie,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CREATE_DIARY":case"CREATE_DIARY_ERROR":case"UPDATE_DIARY":case"UPDATE_DIARY_ERROR":case"DELETE_DIARY":case"CREATE_NOTIFICATION":case"CREATE_NOTIFICATION_ERROR":default:return e}},ce={showOtherDiaries:!0},re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ce,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UDPATE_SHOW_DIARIES":return Object(i.a)(Object(i.a)({},e),{},{showOtherDiaries:t.value});default:return e}},se=n(130),oe=Object(D.b)({auth:ee,diary:ae,entry:ne,data:re,firestore:se.firestoreReducer,firebase:I.firebaseReducer}),le=n(336),de=n(132);n(707),n(704);de.a.initializeApp({apiKey:"AIzaSyAgcTa_9fprc72HrX9FfFPE6jsNTzjxk0s",authDomain:"dairy-ccl.firebaseapp.com",projectId:"dairy-ccl",storageBucket:"dairy-ccl.appspot.com",messagingSenderId:"94969738248",appId:"1:94969738248:web:9145b4dd6ab85eb32b0dbd"}),de.a.firestore().settings({timestampsInSnapshots:!0});var ue=de.a,je=Object(D.d)(oe,Object(D.a)(le.a.withExtraArgument({getFirebase:I.getFirebase}))),he={firebase:ue,config:{userProfile:"users",useFirestoreForProfile:!0},dispatch:je.dispatch,createFirestoreInstance:se.createFirestoreInstance};function be(e){var t=e.children,n=Object(m.c)((function(e){return e.firebase.auth}));return Object(I.isLoaded)(n)?t:Object(a.jsx)("div",{})}o.a.render(Object(a.jsx)(m.a,{store:je,children:Object(a.jsx)(I.ReactReduxFirebaseProvider,Object(i.a)(Object(i.a)({},he),{},{children:Object(a.jsx)(r.a.StrictMode,{children:Object(a.jsx)(be,{children:Object(a.jsx)(X,{})})})}))}),document.getElementById("root")),Z()}},[[706,1,2]]]);
//# sourceMappingURL=main.681e80e5.chunk.js.map